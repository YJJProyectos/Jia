<div class="container main-container" style="width: 100%">
    
  <div align="center">
    <h1>Login</h1>
    <h3>Subida de imagenes y audios</h3>
    <hr>
    <button *ngIf="!_logeoService.usuario.nombre" type="button" class="btn btn-outline-primary" (click)="login()">Ingresar</button>
    <button *ngIf="_logeoService.usuario.nombre" type="button" class="btn btn-outline-danger" (click)="logout()">Cerrar Sesion</button>
  </div>
  
</div>
<div class="container main-container" *ngIf="_logeoService.usuario.nombre">

    <input class="form-control" type="text" [(ngModel)]="dato" name="dato" placeholder="Dato a guardar"
        (keyup.enter)="publicarDato()">
    <div align="center">
            <button  type="button" class="btn btn-outline-warning" [routerLink]="['/datos']" >Ver Datos Guardados </button>
            <button  type="button" class="btn btn-outline-success" (click)="publicarDato()">Publicar datos</button>
    </div>

    <div class="row main-container">
        <div class="col-md-6" >

            <p align="center">Logeado con nombre {{_logeoService.usuario.nombre}} </p>


        </div>

        <div class="col-md-6">

            <p align="center">Logeado con UID {{_logeoService.usuario.uid}} </p>


        </div>
    </div>
    <div align="center" style="margin-bottom: 10px" >
        <h6 style="margin-bottom: 10px">Cargar archivos</h6>
        <input type="file" (change)="verDatos($event)" placeholder="Upload file" multiple 
               accept=".pdf,.doc,.docx,.wav,.mp3,.jpg,.png">
        <button class="btn btn-outline-primary" [disabled]="subiendo" *ngIf="archivosCargados" (click)="subirArchivos()" >Subir datos a la nube</button>

        <button class="btn btn-outline-danger" (click)="limpiarArchivos()" >Limpiar</button>

    </div>

    <div align="center" style="margin-bottom: 10px" >
        <button class="btn btn-outline-success" (click)="getImagenesYSonidos()" >Ver audio subidos</button>
        <button class="btn btn-outline-success" (click)="getImagenesYSonidos()" >Ver imagenes subidas</button>
    </div>
    
    <table class="table" *ngIf="archivosTotalesASubir.length > 0" >
            <thead class="thead=dark">
                <tr>
                    <th>Nombre Archivo</th>
                    <th>Tama√±o</th>
                    <th>Progreso</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let archivo of archivosTotalesASubir">
                    <td>{{archivo.nombreArchivo}}</td>
                    <td>{{archivo.archivo.size /1024 / 1024 | number: '.2-2'}} MB</td>
                    <td>
                        <div class="progress">
                            <div class="progress-bar bg-danger" [ngClass]="
                            {'bg-danger': archivo.progreso <= 30,
                             'bg-warning' : archivo.progreso > 30 && archivo.progreso <= 50,
                             'bg-info' : archivo.progreso >50 && archivo.progreso <=75,
                             'bg-success': archivo.progreso == 100 }" role="progressbar" [ngStyle]="{ width: archivo.progreso + '%' }"></div>
                        </div>
                    </td>
                </tr>
            </tbody>

        </table>


    <div *ngIf="sonidos !== null " style="width: 95%">
        <h5 align="center" >Audios</h5>
        <table class="table table-dark">
            <thead>
            <tr>
                <th>#</th>
                <th>Nombre</th>
                <th>Escuchar</th>
                <th>Opciones</th>
            </tr>
            </thead>

            <tbody>
                <tr *ngFor="let k of sonidos | keys;let i = index;">
                <td>{{ i + 1 }}</td>
                <td> {{ sonidos[k].nombre }} </td>
                <td>

                    <audio controls style="width: 100%">
                    <source [src]="sonidos[k].url">
                    Tu navegador es muy viejo
                    </audio>
                </td>
                <td>
                    <button class="btn btn-outline-danger" 
                    (click)="borrarSonido(sonidos[k].nombre, sonidos[k].tipo, k)" >Borrar</button>
                </td>
                </tr>
            </tbody>

            </table>
    </div>   
     <!-- <audio controls *ngFor="let k of sonidos | keys;let i = index;" >
        <source [src]="sonidos[k].url">
            Tu navegador es muy viejo
    </audio> -->

</div>